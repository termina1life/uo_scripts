while poisoned
    cast 'Cure'
    waitfortarget
    target 'self'
    wait 500
    endwhile
    hotkey "Target Closest Non-Friendly Monster"
    if not poisoned
    'mugger\life_support\lifeSupport'
endif

if hp < maxhp
    if diffhits > 40
        #TODO may need to test for target range.
        cast 'Greater Heal'
        waitfortarget
        target 'self'
        wait 500
    elseif diffhits > 0
        #TODO may need to test for target range.
        cast 'Heal'
        waitfortarget 
        target 'self'
        wait 500
    endif
endif

hotkey "Target Closest Non-Friendly Monster"
script 'mugger\life_support\lifeSupport'


###target range Finder##########
#hotkey "Target Closest Non-Friendly Monster"
#wait 50
#if find lasttarget ground -1 -1 5
#    overhead "▼ Too Dangerous to Cast ▼" 88 lasttarget
#    @setvar too_dangerous
#elseif varexist too_dangerous
#    @unsetvar too_dangerous
#endif
#if varexist too_dangerous and not cooldown "heal potion" and not poisoned
#    script "mugger\life_support\pots"
#endif

